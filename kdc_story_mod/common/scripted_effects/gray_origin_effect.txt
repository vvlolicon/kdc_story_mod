add_gray_origin_event_chain_counter_effect = {
	owner = {
		if = {
			limit = {
				check_variable = {
					which = gray_origin_event_chain_counter
					value < 6
				}
			}
			hidden_effect = {
				change_variable = {
					which = gray_origin_event_chain_counter
					value = 1
				}
			}
			add_event_chain_counter = {
				event_chain = gray_origin_chains_1
				counter = gray_origin_chains_1_counter
				amount = 1
			}
			if = {
				limit = {
					has_completed_event_chain_counter = {
						event_chain = gray_origin_chains_1
						counter = gray_origin_chains_1_counter
					}
					any_situation = {
						is_situation_type = gray_origin_home_planet_situation
						current_stage = gray_origin_home_planet_situation_stage_5
					}
				}
				random_situation = {
					limit = { is_situation_type = gray_origin_home_planet_situation }
					while = {
						limit = { situation_progress > 60 }
						add_situation_progress = -1
					}
				}
			}
		} else = {
			add_monthly_resource_mult = {
				resource = society_research
				value = 3
			}
		}
	}
}


# scope: faction country / leviathan country
wg_boss_default_initial_effect = {
	every_playable_country = {
		establish_communications_no_message = PREV
	}
	every_country = {
		limit = { is_country_type = fallen_empire }
		set_faction_hostility = {
			target = PREV
			set_neutral = yes
			set_hostile = no
		}
		PREV = { set_faction_hostility = {
			target = PREV
			set_neutral = yes
			set_hostile = no
		}}
	}
}

gray_relic_world_get_variable_effect = {
	export_trigger_value_to_variable = {
		trigger = num_districts
		parameters = {
			type = $DISTRICT$
		}
		variable = $VARIABLE$
	}
	divide_variable = { which = $VARIABLE$ value = 2 }
	floor_variable = $VARIABLE$
}

gray_arcology_get_capital_building_lv_effect = {
	if = {
		limit = { has_fully_upgraded_capital = yes }
		set_variable = { which = capital_lv value = 3 }
	}
	else_if = {
		limit = { has_major_upgraded_capital = yes }
		set_variable = { which = capital_lv value = 2 }
	}
	else_if = {
		limit = { has_upgraded_capital = yes }
		set_variable = { which = capital_lv value = 1 }
	}
}

gray_arcology_set_capital_lv_effect = {
	if = {
		limit = { check_variable = { which = capital_tier value = 4 }}
		remove_building = building_colony_shelter
		if = {
			limit = { owner = { is_machine_empire = yes }}
			if = {
				limit = { owner = { is_galactic_emperor = yes }}
				add_building = building_imperial_machine_capital
			}
			else = { add_building = building_machine_system_capital }
		}
		else_if = {
			limit = { owner = { is_hive_empire = yes }}
			if = {
				limit = { owner = { is_galactic_emperor = yes }}
				add_building = building_hive_major_capital
			}
			else = { add_building = building_imperial_hive_capital }
		}
		else = {
			if = {
				limit = { owner = { is_hive_empire = yes }}
				add_building = building_imperial_capital
			}
			else = { add_building = building_system_capital }
		}
	}
	else_if = {
		limit = { check_variable = { which = capital_tier value = 3 }}
		remove_building = building_colony_shelter
		if = {
			limit = { owner = { is_machine_empire = yes }}
			add_building = building_machine_major_capital
		}
		else_if = {
			limit = { owner = { is_hive_empire = yes }}
			add_building = building_hive_major_capital
		}
		else = {
			add_building = building_major_capital
		}
	}
	else_if = {
		limit = { check_variable = { which = capital_tier value = 2 }}
		remove_building = building_colony_shelter
		if = {
			limit = { owner = { is_machine_empire = yes }}
			add_building = building_machine_capital
		}
		else_if = {
			limit = { owner = { is_hive_empire = yes }}
			add_building = building_hive_capital
		}
		else = {
			add_building = building_capital
		}
	}
}